# Single-node deployment with reduced resources for PoC
# All pods scheduled on same node due to RWO volume constraint

global:
  nodeSelector:
    kubernetes.io/hostname: pir-7355993b0422

# Reduce ETH balance to avoid Anvil overflow (10 ETH fits in u64)
# Reduce accounts for faster initialization (100K instead of 8.4M)
# Run eth-mock on other node to utilize available CPU
ethMock:
  # Override global nodeSelector - run on node with more available CPU
  nodeSelector:
    kubernetes.io/hostname: pir-34b2d901babc
  config:
    balance: "10000000000000000000"  # 10 ETH in wei
    accounts: 100000  # 100K accounts for faster PoC demo
  resources:
    requests:
      memory: "512Mi"
      cpu: "500m"  # Increased for faster initialization on less constrained node
    limits:
      memory: "1Gi"
      cpu: "1000m"

# Reduce replicas to 1 for resource-constrained deployment
plinkoPirServer:
  replicaCount: 1
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "500m"

cdnMock:
  replicaCount: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"

rabbyWallet:
  replicaCount: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"

dbGenerator:
  config:
    dbSize: 100000  # Match ethMock accounts
  resources:
    requests:
      memory: "512Mi"
      cpu: "50m"  # Reduced to fit on constrained node
    limits:
      memory: "1Gi"
      cpu: "500m"

plinkoHintGenerator:
  config:
    dbSize: 100000  # Match ethMock accounts
    chunkSize: 316  # sqrt(100000)
  resources:
    requests:
      memory: "512Mi"
      cpu: "50m"  # Reduced to fit on constrained node
    limits:
      memory: "1Gi"
      cpu: "500m"

plinkoUpdateService:
  config:
    dbSize: 100000  # Match ethMock accounts
    chunkSize: 316  # sqrt(100000)
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "250m"

plinkoPirServer:
  config:
    dbSize: 100000  # Match ethMock accounts
    chunkSize: 316  # sqrt(100000)
